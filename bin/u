#!/bin/bash

cd ~/dotfiles
git pull origin master

function install_file {
	echo "$1"
	cd

	if [ -L "$1" ]; then
		exit
	fi

	cd ~/dotfiles/backups
	rm -rf "$1" >/dev/null 2>&1
	
	cd
	mv "$1" ~/dotfiles/backups >/dev/null 2>&1
	
	cd ~/dotfiles/files
	filepath=`readlink -f "$1"`

	cd
	ln -s "$filepath"
	
	echo -en "\t>Linked "
    echo "$1"	
}
export -f install_file

cd ~/dotfiles/files
find . -maxdepth 1 ! -name "." ! -name ".." -exec bash -c 'install_file "$0"' {} \;


git config --global user.name "Tom Mason"
git config --global user.email "wheybags@wheybags.com"
